<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Statistik Tontonan Pribadi — CineVerse" />
  <title data-i18n="stats.title">Statistik Saya — CineVerse</title>

  <!-- PWA -->
  <link rel="manifest" href="../manifest.json" />
  <meta name="theme-color" content="#0A0E1A" />
  <link rel="apple-touch-icon" href="../assets/images/icon-192.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="../assets/css/main.css" />
  <link rel="stylesheet" href="../assets/css/components.css" />
  <link rel="stylesheet" href="../assets/css/layout.css" />
  <link rel="stylesheet" href="../assets/css/animations.css" />
  <link rel="stylesheet" href="../assets/css/polish.css" />
  <link rel="stylesheet" href="../assets/css/light-theme.css" />
  <link rel="stylesheet" href="../assets/css/pages/stats.css" />
  <link rel="stylesheet" href="../assets/css/pages/surprise.css" />
</head>

<body>

  <!-- ─── PAGE LOADER ─── -->
  <div id="page-loader">
    <div class="loader-inner">
      <span class="loader-brand">CINEVERSE</span>
      <div class="loader-film-strip">
        <div class="loader-film-frame"></div>
        <div class="loader-film-frame"></div>
        <div class="loader-film-frame"></div>
        <div class="loader-film-frame"></div>
        <div class="loader-film-frame"></div>
        <div class="loader-film-frame"></div>
      </div>
    </div>
  </div>

  <!-- ─── TRANSITION OVERLAY ─── -->
  <div id="transition-overlay" aria-hidden="true"></div>

  <!-- ─── NAVBAR ─── -->
  <nav class="navbar" role="navigation" aria-label="Navigasi utama">
    <div class="container navbar__inner">
      <a href="../index.html" class="navbar__brand" aria-label="CineVerse Home">
        <span class="navbar__logo-icon" aria-hidden="true">▶</span>
        <span class="navbar__logo-text">CineVerse</span>
      </a>
      <div class="navbar__actions" id="navbar-actions"></div>
    </div>
  </nav>

  <!-- ─── MAIN CONTENT ─── -->
  <main class="main-content" id="main-content">
    <div class="container">

      <!-- Header -->
      <div class="st-header">
        <div class="st-header__left">
          <div class="st-header__icon" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/>
              <line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
          </div>
          <div>
            <h1 class="st-header__title">Statistik Saya</h1>
            <p class="st-header__subtitle">Rekap lengkap aktivitas tontonanmu di CineVerse</p>
          </div>
        </div>
        <div class="st-header__actions">
          <div class="st-period-selector" role="group" aria-label="Pilih periode">
            <button class="st-period-btn active" data-period="all">Semua Waktu</button>
            <button class="st-period-btn" data-period="year">1 Tahun</button>
            <button class="st-period-btn" data-period="month">30 Hari</button>
            <button class="st-period-btn" data-period="week">7 Hari</button>
          </div>
        </div>
      </div>

      <!-- Hero Stats Grid -->
      <div class="st-hero-grid" id="st-hero-grid">
        <!-- Skeleton loading cards -->
        <div class="st-hero-card skeleton-box" style="height:130px;border-radius:16px;"></div>
        <div class="st-hero-card skeleton-box" style="height:130px;border-radius:16px;"></div>
        <div class="st-hero-card skeleton-box" style="height:130px;border-radius:16px;"></div>
        <div class="st-hero-card skeleton-box" style="height:130px;border-radius:16px;"></div>
      </div>

      <!-- Auto-Insights Grid -->
      <section id="st-insights-section" class="hidden">
        <div class="st-card__header" style="margin-bottom:var(--space-3)">
          <h2 class="st-card__title" style="font-size:var(--font-size-base);font-weight:700;color:var(--color-text-primary);margin:0;display:flex;align-items:center;gap:var(--space-2)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
            Insight Tontonanmu
          </h2>
        </div>
        <div class="st-insights-grid">
          <!-- Insight cards rendered by JS -->
        </div>
      </section>

      <!-- Two-column layout -->
      <div class="st-layout">

        <!-- LEFT COLUMN -->
        <div class="st-left">

          <!-- Activity Chart -->
          <section class="st-card" id="st-activity-section">
            <div class="st-card__header">
              <h2 class="st-card__title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
                Aktivitas Tontonan
              </h2>
              <span class="st-card__badge" id="st-activity-total"></span>
            </div>
            <div class="st-chart-wrap">
              <canvas id="st-activity-chart" height="180" aria-label="Grafik aktivitas tontonan"></canvas>
              <div class="st-chart-empty hidden" id="st-chart-empty">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 3v18h18"/><polyline points="7 16 12 11 17 16"/></svg>
                <p>Belum ada aktivitas tontonan</p>
              </div>
            </div>
          </section>

          <!-- Genre Breakdown -->
          <section class="st-card" id="st-genre-section">
            <div class="st-card__header">
              <h2 class="st-card__title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                Sebaran Genre
              </h2>
            </div>
            <div class="st-genre-list" id="st-genre-list">
              <!-- Genre bars rendered by JS -->
              <div class="st-genre-skeleton">
                <div class="skeleton-box" style="height:36px;border-radius:8px;margin-bottom:10px;"></div>
                <div class="skeleton-box" style="height:36px;border-radius:8px;margin-bottom:10px;"></div>
                <div class="skeleton-box" style="height:36px;border-radius:8px;margin-bottom:10px;"></div>
                <div class="skeleton-box" style="height:36px;border-radius:8px;margin-bottom:10px;"></div>
                <div class="skeleton-box" style="height:36px;border-radius:8px;"></div>
              </div>
            </div>
          </section>

          <!-- Top Directors -->
          <section class="st-card">
            <div class="st-card__header">
              <h2 class="st-card__title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="5"/><path d="M3 21v-2a7 7 0 0 1 7-7h4a7 7 0 0 1 7 7v2"/></svg>
                Sutradara Favorit
              </h2>
            </div>
            <div class="st-directors-list" id="st-directors-list">
              <div class="skeleton-box" style="height:52px;border-radius:10px;margin-bottom:10px;"></div>
              <div class="skeleton-box" style="height:52px;border-radius:10px;margin-bottom:10px;"></div>
              <div class="skeleton-box" style="height:52px;border-radius:10px;"></div>
            </div>
          </section>

        </div>

        <!-- RIGHT COLUMN -->
        <div class="st-right">

          <!-- Donut Chart — Genre -->
          <section class="st-card st-card--donut">
            <div class="st-card__header">
              <h2 class="st-card__title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>
                Genre Favorit
              </h2>
            </div>
            <div class="st-donut-wrap">
              <canvas id="st-donut-chart" width="220" height="220" aria-label="Donut chart genre favorit"></canvas>
              <div class="st-donut-center" id="st-donut-center">
                <span class="st-donut-value" id="st-donut-value">—</span>
                <span class="st-donut-label">Genre Utama</span>
              </div>
            </div>
            <div class="st-donut-legend" id="st-donut-legend"></div>
          </section>

          <!-- Rating Distribution -->
          <section class="st-card">
            <div class="st-card__header">
              <h2 class="st-card__title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                Distribusi Rating
              </h2>
            </div>
            <div class="st-rating-dist" id="st-rating-dist">
              <div class="skeleton-box" style="height:120px;border-radius:10px;"></div>
            </div>
          </section>

          <!-- Top Movies by Rating Watched -->
          <section class="st-card">
            <div class="st-card__header">
              <h2 class="st-card__title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></svg>
                Film Tertinggi Ditonton
              </h2>
            </div>
            <div class="st-top-movies" id="st-top-movies">
              <div class="skeleton-box" style="height:64px;border-radius:10px;margin-bottom:8px;"></div>
              <div class="skeleton-box" style="height:64px;border-radius:10px;margin-bottom:8px;"></div>
              <div class="skeleton-box" style="height:64px;border-radius:10px;"></div>
            </div>
          </section>

          <!-- Milestone Badges -->
          <section class="st-card">
            <div class="st-card__header">
              <h2 class="st-card__title">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>
                Pencapaian
              </h2>
            </div>
            <div class="st-badges" id="st-badges">
              <div class="skeleton-box" style="height:80px;border-radius:12px;"></div>
            </div>
          </section>

        </div>

      </div><!-- end st-layout -->

      <!-- Empty State (hidden by default) -->
      <div class="st-empty hidden" id="st-empty">
        <div class="st-empty__icon" aria-hidden="true">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2">
            <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
          </svg>
        </div>
        <h2 class="st-empty__title">Belum Ada Data</h2>
        <p class="st-empty__desc">Tonton beberapa film dulu untuk melihat statistik tontonanmu di sini.</p>
        <a href="search.html" class="btn btn--crimson">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          Cari Film Sekarang
        </a>
      </div>

    </div><!-- end container -->
  </main>

  <!-- ─── FOOTER ─── -->
  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="footer__grid">
        <div class="footer__brand">
          <a href="../index.html" class="footer__logo" aria-label="CineVerse">
            <span class="navbar__logo-icon" aria-hidden="true">▶</span>
            <span class="navbar__logo-text">CineVerse</span>
          </a>
          <p class="footer__tagline">Platform streaming & informasi film modern.</p>
        </div>
        <div>
          <h3 class="footer__col-title">Film</h3>
          <ul class="footer__links">
            <li><a href="search.html" class="footer__link">Semua Film</a></li>
            <li><a href="genre.html" class="footer__link">Genre</a></li>
          </ul>
        </div>
        <div>
          <h3 class="footer__col-title">Akun</h3>
          <ul class="footer__links">
            <li><a href="profile.html" class="footer__link">Profil Saya</a></li>
            <li><a href="watchlist.html" class="footer__link">Watchlist</a></li>
            <li><a href="history.html" class="footer__link">Riwayat</a></li>
            <li><a href="stats.html" class="footer__link">Statistik</a></li>
          </ul>
        </div>
      </div>
      <div class="footer__bottom">
        <p class="footer__copyright">© 2025 CineVerse. Dibuat dengan ❤️ menggunakan HTML, CSS & JavaScript.</p>
      </div>
    </div>
  </footer>

  <!-- ─── TOAST ─── -->
  <div id="toast-container" role="alert" aria-live="polite"></div>

  <!-- ─── SCRIPTS ─── -->
  <script src="../assets/js/utils/helpers.js"></script>
  <script src="../assets/js/utils/hash.js"></script>
  <script src="../assets/js/utils/validators.js"></script>
  <script src="../assets/js/core/storage.js"></script>
  <script src="../assets/js/core/router.js"></script>
  <script src="../assets/js/core/app.js"></script>
  <script src="../assets/js/core/skeleton.js"></script>
  <script src="../assets/js/core/transitions.js"></script>
  <script src="../assets/js/components/toast.js"></script>
  <script src="../assets/js/components/navbar.js"></script>
  <script src="../assets/js/pages/stats.js"></script>
  <script src="../assets/js/pages/surprise.js"></script>
  <script src="../assets/js/core/i18n.js"></script>
  <script src="../assets/js/core/notifications.js"></script>
  <script src="../assets/js/core/anime-polish.js"></script>
  <script src="../assets/js/core/pwa.js"></script>
</body>
</html>
